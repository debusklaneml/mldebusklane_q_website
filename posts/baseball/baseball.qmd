---
title: 'Baseball Time Series Analysis'
date: '2023-11-04'

categories: 
  - Code
  - Time Series
  - R

output: 
  html_document:
    theme: journal
    highlight: cosmo
    
engine: knitr
embed-resources: true
---

# Overview

This post will dive into the a bit of time-series analysis as it relates to a couple baseball teams from the 2023 season. I know we're fresh on the heals of the World Series, but this will look at the longitudinal trends and predictions of both the Astros and the Rangers. This will also use the `timetk` package, just to get familiar with it. I've heard good things. 

```{r}
#| label: setup
# Description of file here

if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, explore, tidylog, skimr, here, arrow, timetk)
```

```{r}
# cols: https://www.retrosheet.org/gamelogs/glfields.txt
# games <- read_csv("~/Desktop/bb/archive-2/games.csv")
# games_2021 <- games %>% 
#   filter(date > '2021-01-01')
# write_parquet(games_2021, here('posts', 'baseball', 'data', 'games_2021.gz.parquet'), compression = 'gzip')
games_2021 <- read_parquet(here('posts', 'baseball', 'data', 'games_2021.gz.parquet'))

```

First, let's get things set up for time-series analyses. 

```{r}
games_2021 %>% 
  mutate(year = year(date)) %>% 
  filter(year == 2022) %>% 
  plot_time_series(date, attendance)
```

```{r}
games_2021 %>% 
  filter(date > '2022-01-01') %>% 
  plot_time_series(date, visitor_rbi)
```

